{% extends "base.html" %}
{% block content %}
{% csrf_token %}
{% if user.profile.major != 'teacher' %}
<p class="error">Dear, you do not have permissions to access this page. We request you to navigate to the page dedicated to your major. Thank you for understanding.</p>
{% else %}
    <p id="successMessage">Hi {{ user.username }}, You have successfully logged into the Project Grading System. Weâ€™re delighted to have you here</p>
    {% for project in projects %}
        <div>
            <h2>{{ project.name }}</h2>
            <p>{{ project.description }}</p>
            <form method="POST" action="{% url 'grade_project' project.id %}">
                {% csrf_token %}
                <label for="grade">Grade:</label>
                <input type="number" id="grade" name="grade" min="0" max="100" step="0.01" value="{{ project.grade }}">
                <input type="submit" value="Submit Grade">
            </form>
        </div>
    {% empty %}
    {% endfor %}
    <table class="table">
        <tr>
            <th>Project Name</th>
            <th>Download</th>
            <th>Grade</th>
        </tr>
        {% for project in projects %}
            <tr>
                <td>{{ project.name }}</td>
                <td><a href="{{ project.file.url }}" download>Download Project</a></td>
                <td>{{ project.grade }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="3">No projects found</td>
            </tr>
        {% endfor %}
{% endif %}
<script>
    setTimeout(function() {
        document.getElementById('successMessage').style.display = 'none';
    }, 10000);
</script>
{% endblock %}